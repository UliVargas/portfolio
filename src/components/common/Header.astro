---
import Button from '../common/Button.astro';
import { Menu, Sun, Moon } from 'lucide-astro';
---

<header id="header" class="fixed top-4 left-4 right-4 z-10 transition-all duration-300 rounded-lg">
  <div class="max-w-[1100px] mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold">Ulises Vargas</h1>
    <nav class="hidden md:flex items-center space-x-4">
      <a href="#about" class="hover:text-green-500 transition-colors">Sobre m√≠</a>
      <a href="#projects" class="hover:text-green-500 transition-colors">Proyectos</a>
      <a href="#contact" class="hover:text-green-500 transition-colors">Contacto</a>
      <Button
        variant="ghost"
        size="icon"
        id="themeToggle"
        aria-label="Toggle theme"
        class="text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"
      >
        <Sun class="h-5 w-5 dark:hidden" />
        <Moon class="h-5 w-5 hidden dark:block" />
      </Button>
    </nav>
    <Button variant="ghost" class="md:hidden text-gray-800 dark:text-gray-200"><Menu class="h-6 w-6" /></Button>
  </div>
</header>

<script>
  import { toggleTheme, handleSystemThemeChange } from '../../utils';

  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }

  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', handleSystemThemeChange);

  const header = document.getElementById('header');
  if (header) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        header.classList.add('bg-white/90', 'dark:bg-gray-900/90', 'backdrop-blur-md', 'shadow-md', 'max-w-[1100px]', 'mx-auto');
      } else {
        header.classList.remove('bg-white/90', 'dark:bg-gray-900/90', 'backdrop-blur-md', 'shadow-md');
      }
    });
  }
</script>